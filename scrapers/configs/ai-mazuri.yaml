# AI Scraper Config: Mazuri
# Problematic site with Shopify-based JS rendering
name: "ai-mazuri"
display_name: "AI Mazuri Product Extractor"
base_url: "https://www.mazuri.com"
scraper_type: "agentic"

# Problem indicators from static scraper:
# - js_rendered: Shopify platform with dynamic content loading
# - selector_breakage: Theme-based selectors change with updates
# - Complex product variants (size options, formula numbers)

ai_config:
  tool: "browser-use"
  task: "Find the exact Mazuri product for the formula/product number and extract product name, brand, description, images, weight, ingredients, guaranteed analysis, and feeding directions."
  max_steps: 10
  confidence_threshold: 0.7
  llm_model: "gpt-4o-mini"
  use_vision: true
  headless: true

workflows:
  - action: "navigate"
    name: "search_mazuri_for_sku"
    params:
      url: "https://mazuri.com/pages/search-results-page?q={sku}"

  - action: "ai_extract"
    name: "extract_mazuri_product"
    params:
      task: "Open the best Mazuri product page and extract Name, Brand, Description, Images, Weight, Ingredients, Guaranteed Analysis, Feeding Directions, and Size Options. Mazuri specializes in exotic animal nutrition products."
      visit_top_n: 2
      max_steps: 12
      confidence_threshold: 0.7
      schema:
        name: str
        brand: str
        description: str
        images: list
        weight: str
        ingredients: str
        guaranteed_analysis: str
        feeding_directions: str
        size_options: list

  - action: "ai_validate"
    name: "validate_mazuri_extraction"
    params:
      required_fields:
        - name
        - brand
        - images
      sku_must_match: false
      min_confidence: 0.65

test_skus:
  - "5E5L"        # Tortoise LS Diet
  - "5M30"        # Rodent Breeder 6F
  - "5M3N"        # Waterfowl Maintenance
  - "5M21"        # Herbivorous Reptile Diet
  - "5MA2"        # Aquatic Turtle Diet
  - "5M4C"        # Tortoise Diet
  - "5M6M"        # Bearded Dragon Diet
  - "5M01"        # Mini Pig Starter
  - "5M02"        # Mini Pig Grower
  - "004261"      # Koi Food
  - "003782"      # Frog Food
  - "004263"      # Goldfish Food
  - "5M07"        # Primate Diet
  - "5M25"        # Iguana Food
  - "003783"      # Newt Food

fake_skus:
  - "xyzabc123notexist456"
  - "9999999"
  - "NOTEXIST"

edge_case_skus:
  - "1"
  - "00000000000"

timeout: 60
retries: 0

anti_detection:
  enable_captcha_detection: false
  enable_rate_limiting: true
  enable_human_simulation: true
  enable_session_rotation: false
  enable_blocking_handling: false
  rate_limit_min_delay: 2.0
  rate_limit_max_delay: 4.0
  session_rotation_interval: 30
  max_retries_on_detection: 2

validation:
  no_results_selectors:
    - ".snize-no-products-found"
    - ".no-results"
    - ".empty-search"
  no_results_text_patterns:
    - "no results found"
    - "no products found"
    - "your search returned no results"

# Success criteria for PoC:
# - Target: >80% extraction success rate
# - Target: <$0.08 per page cost
# - Fallback: Traditional scraper if AI fails 2x
