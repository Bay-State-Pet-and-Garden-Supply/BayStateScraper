name: "bradley"
base_url: "https://www.bradleycaldwell.com"
# Test SKUs: Bradley Caldwell BCI product numbers (verified from featured products)
test_skus: [
  "001135",    # E-Z HANG SCALE
  "010199",    # BLOEM ROUND PLANT CADDY 12 in
  "010202",    # BLOEM ROUND PLANT CADDY 14 in
  "043205",    # K&H LECTRO-SOFT HEATED BED
  "083354",    # GALL SALVE
  "269376",    # KONG PUPPY WUBBA
  "055353",    # SPORTMIX ESSENTIALS DOG FOOD 40 LB
]
fake_skus: ["xyzabc123notexist456", "999999", "NOTEXIST"]
edge_case_skus: ["1", "0000000000000"]  # Very short and zero-padded
timeout: 15
retries: 1
image_quality: 60

selectors:

  # Detail page selectors
  - name: "Name"
    selector: "main h1"
    attribute: "text"
    required: true
  - name: "Brand"
    selector: "//main//h1/preceding-sibling::p[1]/a"
    attribute: "text"
    required: false
  - name: "Weight"
    selector: "//main//li[contains(normalize-space(.), 'Weight:')]"
    attribute: "text"
    required: false
  - name: "Image URLs"
    selector: "main img[src*='products/']"
    attribute: "src"
    multiple: true
    required: false

  # Search result list view selectors
  - name: "Search Result BCI#"
    selector: "main article >> text=BCI#"
    attribute: "text"
    index: 0
    required: false
  - name: "Search Result UPC"
    selector: "main article >> text=UPC Code"
    attribute: "text"
    index: 0
    required: false

workflows:
  - action: "navigate"
    params:
      url: "https://www.bradleycaldwell.com/search?term={sku}"
  - action: "wait_for_hidden"
    params:
      selector: "div.loading-overlay, .loading"
      timeout: 10
  - action: "wait_for"
    params:
      selector:
        - "main article"
        - "main h3:has-text('Sorry')"
        - "span:has-text('0 items')"
      timeout: 30
  - action: "check_no_results"
  - action: "conditional_skip"
    params:
      if_flag: "no_results_found"
  
  # === SEARCH RESULT VALIDATION (Fail Fast) ===
  # Validate that the first result's BCI# matches the searched SKU
  # This prevents false positives where search returns a product because 
  # its UPC contains the search term (not just BCI#)
  - action: "validate_search_result"
  - action: "conditional_skip"
    params:
      if_flag: "no_results_found"
  # ===========================================
  
  - action: "wait_for"
    params:
      selector:
        - "text='View product'"
        - "//a[contains(text(), 'View product')]"
      timeout: 15
  - action: "wait"
    params:
      duration: 2
  - action: "click"
    params:
      selector: "text='View product'"
      index: 0
  - action: "wait"
    params:
      duration: 3
  - action: "wait_for"
    params:
      selector: ["h1"]
      timeout: 10
  - action: "extract"
    params:
      fields: ["Name", "Brand", "Weight", "Image URLs"]
  - action: "transform_value"
    params:
      field: "Image URLs"
      transformations:
        - type: "replace"
          pattern: "/small/"
          replacement: "/large/"
        - type: "replace"
          pattern: "_small"
          replacement: "_large"

validation:
  no_results_selectors:
    - "main h3:has-text('Sorry')"
    - "span:has-text('0 items')"
    - ".no-results"
    - "[data-testid='no-results']"
  no_results_text_patterns:
    - "Sorry, no results"
    - "0 items"
    - "no results found"
    - "Your search returned no results"

anti_detection:
  enable_captcha_detection: false
  enable_rate_limiting: false
  enable_human_simulation: false
  enable_session_rotation: false
  enable_blocking_handling: false
  max_retries_on_detection: 3
